(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c79fadfe"],{"7f7f":function(t,e,o){var a=o("86cc").f,r=Function.prototype,s=/^\s*function ([^ (]*)/,i="name";i in r||o("9e1e")&&a(r,i,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})},ee17:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"animated fadeIn"},[o("b-card",{attrs:{"header-tag":"header"}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("i",{staticClass:"icon-drop"}),t._v(" Nueva Boleta\n    ")]),o("b-card-body",[o("form",{on:{submit:function(e){return e.preventDefault(),t.form_newboleta(e)}}},[o("div",{staticClass:"row"},[o("b-col",{attrs:{sm:"12"}},[o("h3",{staticClass:"text-center"},[t._v("Boleta de Compra "),o("br"),t._v(" Sitaav AulaPeru-TIC")])])],1),o("b-row",[o("b-col",{staticClass:"offset-9",attrs:{sm:"3"}},[o("b-form-group",[o("b-form-input",{attrs:{type:"date",id:"name",required:""},model:{value:t.boleta.fecha,callback:function(e){t.$set(t.boleta,"fecha",e)},expression:"boleta.fecha"}})],1)],1),o("b-col",{attrs:{sm:"12"}},[o("b-form-group",{attrs:{id:"fieldsetHorizontal1",horizontal:"","label-cols":2,breakpoint:"md",description:t.dniDesc,label:"Documento de Identidad:","label-for":"dni"}},[o("b-input-group",[o("b-form-input",{attrs:{id:"dni",required:""},model:{value:t.boleta.dni,callback:function(e){t.$set(t.boleta,"dni",e)},expression:"boleta.dni"}}),o("b-input-group-append",[o("b-btn",{attrs:{variant:"primary"},on:{click:function(e){return e.preventDefault(),t.buscar_dni(e)}}},[o("i",{staticClass:"fa fa-search"})])],1)],1)],1)],1),o("b-col",{attrs:{sm:"12"}},[o("b-row",[o("b-col",{attrs:{sm:"6"}},[o("b-form-group",{attrs:{id:"fieldsetHorizontal2",horizontal:"","label-cols":4,breakpoint:"md",label:"SeÃ±or(es):","label-for":"name"}},[o("b-form-input",{attrs:{id:"name",placeholder:"Nombres",required:""},model:{value:t.boleta.nombres,callback:function(e){t.$set(t.boleta,"nombres",e)},expression:"boleta.nombres"}})],1)],1),o("b-col",{attrs:{sm:"3"}},[o("b-form-input",{attrs:{id:"Paterno",placeholder:"A.Paterno"},model:{value:t.boleta.apepaterno,callback:function(e){t.$set(t.boleta,"apepaterno",e)},expression:"boleta.apepaterno"}})],1),o("b-col",{attrs:{sm:"3"}},[o("b-form-input",{attrs:{id:"Materno",placeholder:"A.Materno"},model:{value:t.boleta.apematerno,callback:function(e){t.$set(t.boleta,"apematerno",e)},expression:"boleta.apematerno"}})],1)],1)],1),o("b-col",{attrs:{sm:"12"}},[o("b-form-group",{attrs:{id:"fieldsetHorizontal3",horizontal:"","label-cols":2,breakpoint:"md",label:"Direccion:","label-for":"Direccion"}},[o("b-form-input",{attrs:{id:"Direccion"},model:{value:t.boleta.direccion,callback:function(e){t.$set(t.boleta,"direccion",e)},expression:"boleta.direccion"}})],1)],1)],1),o("b-row",{staticClass:"justify-content-center"},[o("b-col",{attrs:{sm:"12"}},[o("b-button",{staticClass:"float-right m-2",attrs:{variant:"success"},on:{click:t.showModal}},[t._v("Elegir Productos")]),o("b-modal",{ref:"myModalRef",attrs:{id:"myModal",size:"lg",title:"Productos"},on:{ok:t.okModalProductos}},[o("b-table",{attrs:{striped:"",responsive:"",items:t.productos,fields:t.fields},scopedSlots:t._u([{key:"opciones",fn:function(e){return[o("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedItems[e.item.id],expression:"checkedItems[row.item.id]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checkedItems[e.item.id])?t._i(t.checkedItems[e.item.id],null)>-1:t.checkedItems[e.item.id]},on:{click:function(t){t.stopPropagation()},change:[function(o){var a=t.checkedItems[e.item.id],r=o.target,s=!!r.checked;if(Array.isArray(a)){var i=null,n=t._i(a,i);r.checked?n<0&&t.$set(t.checkedItems,e.item.id,a.concat([i])):n>-1&&t.$set(t.checkedItems,e.item.id,a.slice(0,n).concat(a.slice(n+1)))}else t.$set(t.checkedItems,e.item.id,s)},function(o){t.addI(e.item,t.checkedItems[e.item.id])}]}}),t._v("\n                            "+t._s(1==t.checkedItems[e.item.id]?"Agregado":"")+"\n                    ")]}},{key:"row-details",fn:function(t){}}])})],1)],1),o("b-col",{attrs:{sm:"12"}},[o("b-card",{staticClass:"table-responsive"},[o("table",{staticClass:"table bordered"},[o("tr",[o("th",[t._v("Cantidad")]),o("th",[t._v("Producto")]),o("th",[t._v("P.Unitario")]),o("th",[t._v("Importe")]),o("th",[t._v("Observacion")])]),t._l(t.boleta.productos,function(e){return o("tr",{key:e.id},[o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.cantidad,expression:"prod.cantidad"}],staticClass:"form-control",staticStyle:{width:"80px"},attrs:{type:"number",min:"0"},domProps:{value:e.cantidad},on:{input:function(o){o.target.composing||t.$set(e,"cantidad",o.target.value)}}})]),o("td",{domProps:{textContent:t._s(e.name)}}),o("td",{domProps:{textContent:t._s(e.precio)}}),o("td",[t._v("S/"),o("b",{domProps:{textContent:t._s(e.importe=e.cantidad*e.precio)}})]),o("td",[o("b-form-textarea",{attrs:{placeholder:"something descripcion",rows:1,"max-rows":3},model:{value:e.descripcion,callback:function(o){t.$set(e,"descripcion",o)},expression:"prod.descripcion"}})],1)])}),o("tr",[o("td",{attrs:{colspan:"5"}})]),o("tr",[o("td",{attrs:{colspan:"3"}}),o("td",[o("b",[t._v("Descuento")])]),o("td",[o("b-input-group",[o("b-input-group-prepend",[o("b-input-group-text",[t._v("S/")])],1),o("b-form-input",{staticStyle:{width:"90px"},attrs:{id:"desc",type:"number",min:"0",required:""},model:{value:t.boleta.descuento,callback:function(e){t.$set(t.boleta,"descuento",e)},expression:"boleta.descuento"}})],1)],1)]),o("tr",[o("td",{attrs:{colspan:"3"}}),o("td",[o("b",[t._v("TOTAL")])]),o("td",[o("b",{domProps:{textContent:t._s("S/"+t.pagototal)}})])])],2),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("p",{staticClass:"text-center"},[o("b-button",{staticClass:"m-2",attrs:{type:"submit",variant:"primary"}},[t._v("Guardar")]),o("b-button",{staticClass:"m-2",attrs:{variant:"secondary"}},[t._v("Cancelar")])],1)])])],1)],1)],1)])],1)],1)},r=[],s=(o("7f7f"),{name:"BoletaCreate",data:function(){return{boleta:{dni:"",apepaterno:"",apematerno:"",nombres:"",fecha:"",direccion:"",productos:[],total:0,descuento:0},dniDesc:"Let us know your dni.",producto:{name:"",precio:0,descripcion:""},productos:[],checkedItems:[],boletaproductos:[],fields:["name","precio","opciones"]}},computed:{pagototal:function(){for(var t=0,e=0;e<this.boleta.productos.length;e++)t+=this.boleta.productos[e].importe;return t-this.boleta.descuento}},methods:{form_newboleta:function(){this.boleta.total=this.pagototal;var t="http://sitaav-pagos.test/api/boletas/store";axios.post(t,this.boleta).then(function(t){toastr.success("Boleta Creado Correctamente"),console.log(t)}).catch(function(t){console.log(t)})},addI:function(t,e){console.log("es: "+e),e?(this.boleta.productos.push({id:t.id,name:t.name,precio:t.precio,cantidad:1,importe:t.precio,descripcion:""}),console.log("add: "+t.id)):(this.boleta.productos=this.boleta.productos.filter(function(e){return e.id!=t.id}),console.log("remove id: "+t.id))},okModalProductos:function(){var t={};this.boleta.productos=this.boleta.productos.filter(function(e){var o=!t[e.id]||!1;return t[e.id]=!0,o})},buscar_dni:function(){var t=this,e="https://sitaav.org/api/certificados/dni";this.dniDesc="Buscando ...",axios.post(e,{dni:this.boleta.dni}).then(function(e){e.data.user.total>=1?(t.boleta.nombres=e.data.user.data[0].nombres,t.boleta.apepaterno=e.data.user.data[0].apepaterno,t.boleta.apematerno=e.data.user.data[0].apematerno,t.dniDesc="users encontrados :"+e.data.user.total):t.dniDesc="Usuario no encontrado"}).catch(function(e){t.dniDesc="ocurrio un error",console.log(e)})},showModal:function(){var t=this,e="http://sitaav-pagos.test/api/productos";axios.get(e).then(function(e){t.productos=e.data.productos}).catch(function(t){console.log(t)}),this.$refs.myModalRef.show()},hideModal:function(){this.$refs.myModalRef.hide()}}}),i=s,n=o("2877"),c=Object(n["a"])(i,a,r,!1,null,null,null);c.options.__file="create.vue";e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-c79fadfe.37dec598.js.map